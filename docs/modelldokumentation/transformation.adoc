== Modelltransformationen
=== Erstintegration
Die Erstintegration beschreibt die erstmalige Datenübernahme aus dem bisherigen produktiven System ins kantonale Geodatenmodell.

* Quellmodell: keines; die Sachdaten liegen in einer Access-Datenbank und die Geodaten in einem Geopackage vor
* Zielmodell: Das hier beschriebene Datenmodell

==== Details zu den Daten
* Sachdaten
** **RodungenSZ_Datenbank.accdb** mit Abgabedatum vom 29. Januar 2026
* Geodaten
** **Rodungen&Ersatz - Kopie.gpkg** mit Stand vom 26.01.2026 (weiter unten als "[Geo-1]" bezeichnet)
** **Nachteilige_Nutzungen_KTSZ - Kopie.gpkg** mit Stand vom 11.12.2024 (weiter unten als "[Geo-2]" bezeichnet)

==== Klasse `+Rodungsbewilligung+`
[cols=2*,options="header"]
|===
| Quellattribut | Zielattribut
| neu generieren m| OID
| fix: `+geoadmin+` m| erfasstVon
| fix: `+1900-01-01+` m| erfasstAm
| fix: `+geoadmin+` m| geaendertVon
| fix: `+1900-01-01+` m| geaendertAm
| `+RodungenSZ.GEKO_Nr+` m| Kennung
| `+RodungenSZ.Nr_Bund+` m| Kennung_Bund
| `+RodungenSZ.ObjektBeschrieb+` m| Beschreibung
| `+RodungenSZ.Ersatz_Real+` m| hat_Realersatzpflicht
| `+RodungenSZ.ROdef+` m| Rodungsflaeche_def
| `+RodungenSZ.ROtemp+` m| Rodungsflaeche_temp
| `+RodungenSZ.Flaeche_Fruehere_Rodung15Jahre+` m| Rodungsflaeche_histo
| `+RodungenSZ.Flaeche_Ersatz_Real+` m| Realersatzflaeche
| `+RodungenSZ.Flaeche_Ersatz_Verzicht+` m| Verzichtsflaeche
| todo m| Massnahmeflaeche_total
| todo m| EA_Flaeche_total
| todo m| EA_Flaeche_gebietsfremd
| - - - m| Massnahmenbeschreibung
| - - - m| Massnahmeflaeche_Wald
| - - - m| Massnahmeflaeche_Nichtwald
| - - - m| hat_Massnahmenpool
| - - - m| Massnahmenbemerkung
| - - - m| Rodungszweckbemerkung
| todo m| Rodungsfrist
| todo m| Fristverlaengerung_RO
| todo m| Rodungsfristbemerkung
| todo m| Ersatzfrist
| todo m| Ersatzfristbemerkung
| todo m| Fristverlaengerung_EA
| - - - m| hat_Finanzausgleich
| todo m| Abschlussdatum
| todo m| Verfuegungsdatum
| - - - m| Referenz
| todo m| Rodungsnummer
| todo m| Baugesuchsnummer
| todo m| Bemerkung_intern
| todo m| Bemerkung
| todo m| rGemeinde
| `+OID+` aus Katalog "Ersatzmassnahme" mit Übereinstimmung von `+Code+` und `+RodungenSZ.Ersatz_MassnahmenNL+` m| rErsatzmassnahmeart
| todo m| rVerzichtsgrund
| `+OID+` aus Katalog "Zustaendigkeit" mit Übereinstimmung von `+Code+` und `+RodungenSZ.Zuständigkeit+` m| rZustaendigkeit
| - - - m| rMassnahme
| todo m| rRodungszweck
| todo m| rRodungsstand
|===

==== Klasse `+Lage+`
[cols=2*,options="header"]
|===
| Quellattribut | Zielattribut
| neu generieren m| OID
| fix: `+geoadmin+` m| erfasstVon
| falls `+ImGISerfasst+` leer, dann `+1900-01-01+` +
sonst `+ImGISerfasst+` m| erfasstAm
| fix: `+geoadmin+` m| geaendertVon
| Wert von `+erfasstAm+` m| geaendertAm
| todo: Abbildungsregel klären m| Massnahmebeschreibung
| todo: Abbildungsregel klären m| Bemerkung
| falls `+Schwerpunkt+` leer, dann FALSE +
sonst TRUE m| ist_Schwerpunkt
| für den Schwerpunkt: Koordinaten aus `+Schwerpunkt+` +
für Rodungspunkte: Koordinaten der Spalten `+RO_XKoord_Fläche1-10+`/`+RO_YKoord_Fläche1-10+` +
für Massnahmenpunkte: Koordinaten der Spalten `+EA_XKoord_Fläche1-6+`/`+EA_YKoord_Fläche1-6+` +
todo: Klären, ob es in den Geopackeages Punkt-Geometrien gibt, welche zusätzlich zu übernehmen sind m| Geometrie
| `+OID+` der zugeordneten Rodungsbewilligung m| rRodungsbewilligung
| `+Stammdaten.Genauigkeit.OID+` des Eintrages, welcher mit `+GISGenauigkeit+` übereinstimmt +
(evtl. stimmen die Werte nicht 1:1) m| rGenauigkeit
| todo: Abbildungsregel klären (evtl. leer lassen) m| rMassnahme
| todo: Abbildungsregel klären m| rRodungstyp
|===

==== Klasse `+Flaeche+`
[cols=2*,options="header"]
|===
| Quellattribut | Zielattribut
| neu generieren m| OID
| fix: `+geoadmin+` m| erfasstVon
| falls `+ImGISerfasst+` leer, dann `+1900-01-01+` +
sonst `+ImGISerfasst+` m| erfasstAm
| fix: `+geoadmin+` m| geaendertVon
| Wert von `+erfasstAm+` m| geaendertAm
| [Geo-1] `+Rodungen&Ersatz.Massnahme+` m| Massnahmebeschreibung
| [Geo-1] `+Rodungen&Ersatz.Bemerkung+` m| Bemerkung
| [Geo-1] `+Rodungen&Ersatz.Geometrie+` +
todo: Klären, wie mit der Geometrie [Geo-2] umzugehen ist m| Geometrie
| `+OID+` der zugeordneten Rodungsbewilligung m| rRodungsbewilligung
| `+Stammdaten.Genauigkeit.OID+` des Eintrages, welcher mit `+GISGenauigkeit+` übereinstimmt +
(evtl. stimmen die Werte nicht 1:1) m| rGenauigkeit
| todo: Abbildungsregel klären (evtl. leer lassen) m| rMassnahme
| `+Stammdaten.Rodungstyp.OID+` aufgrund [Geo-1] `+Rodungen&Ersatz.Kategorie+`; Abbildung: +
`+"EA"+` -> `+"Realersatz"+` + 
`+"Niederhalt"+` -> todo: Kategorie klären (`+"Massnahmen Natur- und Landschaftsschutz"+`?) + 
`+"ROdef"+` -> `+"Rodung definitiv"+` + 
`+"ROTemp"+` -> `+"Rodung temporär"+` m| rRodungstyp
|===


=== Transformation ins minimale Geodatenmodell des Bundes
* Quellmodell: Das hier beschriebene Datenmodell
* Zielmodell: http://models.geo.admin.ch/BAFU/Rodungen_V1_1.ili[Rodungen_V1_1] (Version: 2025-01-27)

==== Struktur `+Objekt+`
[cols=2*,options="header"]
|===
| Quellattribut | Zielattribut
| `+SZ_Rodungen_V1.Fachdaten.Lage.Geometrie+` m| Punkt
| `+SZ_Rodungen_V1.Fachdaten.Flaeche.Geometrie+` m| Polygon
| `+SZ_Rodungen_V1.Stammdaten.Rodungstyp.Code+` +
über: `+SZ_Rodungen_V1.Fachdaten.Rodungstyp__Geometrie.rRodungstyp+` m| Objekt_Typ
| `+SZ_Rodungen_V1.Stammdaten.Massnahme.Code+` +
über: `+SZ_Rodungen_V1.Fachdaten.Massnahme__Geometrie.rMassnahme+` m| MassnahmenNL_Typ
| `+SZ_Rodungen_V1.Fachdaten.Geometrie.Massnahmebeschreibung+` m| MassnahmenNL_Beschreibung
|===

==== Klasse `+Rodungsbewilligung+`
[cols=2*,options="header"]
|===
| Quellattribut | Zielattribut
| `+SZ_Verfahren_Waldrecht_V1.Fachdaten.Rodungsbewilligung.Kennung+` m| Nr_Kanton
| `+SZ_Verfahren_Waldrecht_V1.Fachdaten.Rodungsbewilligung.Kennung_Bund+` m| Nr_Bund
| `+SZ_Verfahren_Waldrecht_V1.Fachdaten.Rodungsbewilligung.Beschreibung+` m| Vorhaben
| `+SZ_Verfahren_Waldrecht_V1.Fachdaten.Rodungsbewilligung.hat_Realersatzpflicht+` m| Ersatz_Real
| `+SZ_Rodungen_V1.Stammdaten.Ersatzmassnahmeart.Code+` +
über: `+SZ_Rodungen_V1.Fachdaten.Ersatzmassnahmeart__Rodungsbewilligung.rErsatzmassnahmeart+` m| Ersatz_MassnahmenNL
| `+SZ_Rodungen_V1.Stammdaten.Verzichtsgrund.Code+` +
über: `+SZ_Rodungen_V1.Fachdaten.Verzichtsgrund__Rodungsbewilligung.rVerzichtsgrund+` m| Ersatz_Verzicht
| `+SZ_Rodungen_V1.Stammdaten.Zustaendigkeit.Code+` +
über: `+SZ_Rodungen_V1.Fachdaten.Zustaendigkeit__Rodungsbewilligung.rZustaendigkeit+` m| Zustaendigkeit
| `+SZ_Rodungen_V1.Fachdaten.Rodungsbewilligung.Rodungsflaeche_def+` m| Flaeche_Rodung_def
| `+SZ_Rodungen_V1.Fachdaten.Rodungsbewilligung.Rodungsflaeche_temp+` m| Flaeche_Rodung_temp
| `+SZ_Rodungen_V1.Fachdaten.Rodungsbewilligung.Rodungsflaeche_histo+` m| Flaeche_Fruehere_Rodung15Jahre
| `+SZ_Rodungen_V1.Fachdaten.Rodungsbewilligung.Realersatzflaeche+` m| Flaeche_Ersatz_Real
| `+SZ_Rodungen_V1.Fachdaten.Rodungsbewilligung.Verzichtsflaeche+` m| Flaeche_Ersatz_Verzicht
| `+SZ_Rodungen_V1.Fachdaten.Rodungsbewilligung.Massnahmeflaeche_total+` m| Flaeche_Ersatz_MassnahmenNL
| `+SZ_Rodungen_V1.Stammdaten.Massnahme.Code+` +
über: `+SZ_Rodungen_V1.Fachdaten.Massnahme__Rodungsbewilligung.rMassnahme+` m| MassnahmeNL_Typ
| `+SZ_Rodungen_V1.Fachdaten.Rodungsbewilligung.Massnahmenbeschreibung+` m| MassnahmenNL_Beschreibung
| `+SZ_Rodungen_V1.Fachdaten.Rodungsbewilligung.Massnahmeflaeche_Wald+` m| FlaecheMassnahmeNL_ImWaldareal
| `+SZ_Rodungen_V1.Fachdaten.Rodungsbewilligung.Massnahmeflaeche_Nichtwald+` m| FlaecheMassnahmeNL_AusserhalbWaldareal
| `+SZ_Rodungen_V1.Fachdaten.Rodungsbewilligung.hat_Massnahmenpool+` m| MassnahmeNL_Pool
| `+SZ_Rodungen_V1.Fachdaten.Rodungsbewilligung.Massnahmenbemerkung+` m| Massnahme_WeitereBemerkungen
| `+SZ_Rodungen_V1.Fachdaten.Rodungsbewilligung.rRodungszweck+` m| Rodungszweck
| `+SZ_Rodungen_V1.Fachdaten.Rodungsbewilligung.Rodungszweckbemerkung+` m| Rodungszweck_Bemerkungen
| `+SZ_Rodungen_V1.Fachdaten.Rodungsbewilligung.Rodungsfrist+` m| Frist_Rodung
| `+SZ_Rodungen_V1.Fachdaten.Rodungsbewilligung.Rodungsfristbemerkung+` m| Frist_Rodung_Bemerkung
| `+SZ_Rodungen_V1.Fachdaten.Rodungsbewilligung.Ersatzfrist+` m| Frist_Ersatz
| `+SZ_Rodungen_V1.Fachdaten.Rodungsbewilligung.Ersatzfristbemerkung+` m| Frist_Ersatz_Bemerkung
| `+SZ_Rodungen_V1.Fachdaten.Rodungsbewilligung.hat_Finanzausgleich+` m| Ausgleich
| `+SZ_Rodungen_V1.Stammdaten.Rodungsstand.Code+` +
über: `+SZ_Rodungen_V1.Fachdaten.Rodungsstand__Rodungsbewilligung.rRodungsstand+` m| Stand_Abgeschlossen
| `+SZ_Verfahren_Waldrecht_V1.Fachdaten.Rodungsbewilligung.Abschlussdatum+` m| Datum_Abgeschlossen
| `+SZ_Verfahren_Waldrecht_V1.Fachdaten.Rodungsbewilligung.Verfuegungsdatum+` m| Verfuegung_Datum
| todo: klären, ob zu streichen m| Verfuegung_URL
| `+SZ_Verfahren_Waldrecht_V1.Fachdaten.Rodungsbewilligung.Referenz+` m| Weitere_Referenzen
| `+SZ_Verfahren_Waldrecht_V1.Fachdaten.Lage.Geometrie+` +
Regel: Ableiten der Punkt-Koordinate, falls `+ist_Schwerpunkt+` = TRUE m| Schwerpunkt
| `+SZ_Verfahren_Waldrecht_V1.Fachdaten.Lage.Geometrie+` +
und/oder +
`+SZ_Verfahren_Waldrecht_V1.Fachdaten.Flaeche.Geometrie+` +
Regel: Es werden nur Objekte der Klasse `+Lage+` transferiert, welche `+ist_Schwerpunkt+` = FALSE aufweisen. m| Objekte
|===

==== Klasse `+ErsatzMassnahmenNLBeschreibung+`
[cols=2*,options="header"]
|===
| Quellattribut | Zielattribut
| todo m| Typ
| todo m| Beschreibung
|===

==== Klasse `+ErsatzVerzichtBeschreibung+`
[cols=2*,options="header"]
|===
| Quellattribut | Zielattribut
| todo m| Typ
| todo m| Beschreibung
|===

==== Klasse `+MassnahmeNLTypBeschreibung+`
[cols=2*,options="header"]
|===
| Quellattribut | Zielattribut
| todo m| Typ
| todo m| Beschreibung
|===

==== Klasse `+RodungszweckTypBeschreibung+`
[cols=2*,options="header"]
|===
| Quellattribut | Zielattribut
| todo m| Typ
| todo m| Beschreibung
|===

==== Klasse `+ZustaendigkeitsTypBeschreibung+`
[cols=2*,options="header"]
|===
| Quellattribut | Zielattribut
| todo m| Typ
| todo m| Beschreibung
|===

==== Klasse `+StandTypBeschreibung+`
[cols=2*,options="header"]
|===
| Quellattribut | Zielattribut
| todo m| Typ
| todo m| Beschreibung
|===

==== Klasse `+ObjektTypBeschreibung+`
[cols=2*,options="header"]
|===
| Quellattribut | Zielattribut
| todo m| Typ
| todo m| Beschreibung
|===

ifdef::backend-pdf[]
<<<
endif::[]













